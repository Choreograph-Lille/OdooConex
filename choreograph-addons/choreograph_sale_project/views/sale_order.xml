<odoo>
    <!-- Form View -->
    <record id="view_order_form_inherit2" model="ir.ui.view">
        <field name="name">sale.order.form.inherit2</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="choreograph_sale.view_order_form_inherit"/>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='sms_campaign']" position="before">
                <page name="sale_operation" string="Operation" attrs="{'invisible': [('recurrence_id', '!=', False)]}">
                    <group>
                        <group>
                            <field name="potential_return" force_save="1"/>
                            <field name="potential_return_date" attrs="{'invisible':[('potential_return', '=', False)]}"/>
                            <field name="potential_return_task_id" attrs="{'invisible':[('potential_return', '=', False)]}" readonly="1" force_save="1"/>
                            <field name="study_delivery" readonly="1" force_save="1"/>
                            <field name="study_delivery_date" attrs="{'invisible':[('study_delivery', '=', False)]}"/>
                            <field name="study_delivery_task_id" attrs="{'invisible':[('study_delivery', '=', False)]}" readonly="1" force_save="1"/>
                            <field name="presentation" force_save="1"/>
                            <field name="presentation_date" attrs="{'invisible':[('presentation', '=', False)]}"/>
                            <field name="presentation_task_id" attrs="{'invisible':[('presentation', '=', False)]}" readonly="1" force_save="1"/>
                            <field name="study_global_task_id" invisible="1" readonly="1"/>
                        </group>
                        <group>
                            <field name="show_provider_delivery" invisible="1"/>
                            <field
                                    name="operation_provider_delivery_ids"
                                    attrs="{'invisible':[('show_provider_delivery', '=', False)]}"
                            >
                                <tree editable="bottom">
                                    <field name="order_id" invisible="1"/>
                                    <field name="delivery_date"/>
                                    <field name="task_id" readonly="1"/>
                                </tree>
                            </field>
                        </group>
                    </group>
                    <h3>
                        <label for="operation_condition_ids"/>
                    </h3>
                    <field name="operation_condition_ids"/>
                    <h3>
                        <label for="comment"/>
                    </h3>
                    <field name="comment"/>
                    <group>
                        <group>
                            <field name="quantity_to_deliver"/>
                        </group>
                        <group>
                            <field name="to_validate"/>
                        </group>
                        <field name="segment_ids">
                            <tree editable="bottom">
                                <field name="segment_number"/>
                                <field name="model_selection"/>
                                <field name="name"/>
                                <field name="ranking"/>
                                <field name="quantity"/>
                                <field name="depth"/>
                                <field name="keycode"/>
                                <field name="civility"/>
                                <field name="comment"/>
                            </tree>
                        </field>
                        <div>
                            <label for="repatriate_information" class="oe_inline"/>
                            <field name="repatriate_information" class="oe_inline"/>
                        </div>
                    </group>
                </page>
            </xpath>
            <xpath expr="//field[@name='project_count']" position="after">
                <field name="can_display_redelivery" invisible="1" />
                <field name="operation_type_id" invisible="1" />
            </xpath>
            <xpath expr="//button[@id='action_generate_operation']" position="after">
                <button
                    name="action_redelivery"
                    id="redelivery_prod_studies"
                    context="{'redelivery_type': 'studies'}"
                    string="Redelivery studies"
                    attrs="{'invisible': [('can_display_redelivery','=',False)]}"
                    class="btn-secondary"
                    type="object"
                />
                <button
                    name="action_redelivery"
                    id="redelivery_prod_project"
                    context="{'redelivery_type': 'prod'}"
                    attrs="{'invisible': [('can_display_redelivery','=',False)]}"
                    string="Redelivery Prod"
                    class="btn-secondary"
                    type="object"
                />
            </xpath>
        </field>
    </record>

    <record id="view_order_form_inherit_sale_project2" model="ir.ui.view">
        <field name="name">sale.order.form.sale.project2</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale_project.view_order_form_inherit_sale_project"/>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <button name="action_view_project_ids" position="attributes">
                <attribute name="attrs">{'invisible': [('project_ids', '=', [])]}</attribute>
            </button>
        </field>
    </record>
</odoo>
